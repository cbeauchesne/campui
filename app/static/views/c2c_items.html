<div class="{{c2c_item}}s-view">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h3>{{c2c_item + 's' | translate}}</h3>
                    <div ng-if="data" ibox-tools></div>
                </div>
                <div class="ibox-content query-editor">

                    <div class="row">

                        <filter-item ng-repeat="(itemId, itemValue) in qe.queryModel"
                                     query-editor="qe"
                                     item-id="itemId">
                        </filter-item>

                        <div class="form-group col-md-1">

                            <div class="dropdown" ng-if="qe.filterItemStorage.availables">
                                <button class="btn btn-sm badge-success dropdown-toggle"
                                        type="button"
                                        data-toggle="dropdown"
                                        uib-tooltip="{{ 'Add a item'| translate }}">
                                    <i class="fa fa-plus"></i>
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li ng-repeat="item in qe.filterItemStorage.availables">
                                        <a href="#" ng-click="qe.showFilterItem(item)">
                                            {{qe.filterItems[item].label | translate }}
                                        </a>
                                    </li>
                                </ul>
                            </div>


                            <div class="dropdown" ng-if="qe.filterItemStorage.storage">
                                <button class="btn btn-sm badge-success dropdown-toggle"
                                        type="button"
                                        data-toggle="dropdown"
                                        uib-tooltip="{{ 'Add a item'| translate }}">
                                    <i class="fa fa-plus"></i>
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li ng-repeat="item in qe.filterItemStorage.storage"
                                        ng-class="{dropdownSubmenu:item.subItems}">
                                        <a href="#" ng-click="qe.showFilterItem(item.item)" ng-if="item.item">
                                            {{qe.filterItems[item.item].label | translate }}
                                        </a>
                                        <a ng-if="item.subItems" ng-click="qe.TEST()">
                                            {{item.label}}
                                            <span class="caret"></span>
                                        </a>
                                        <ul ng-if="item.subItems" class="dropdown-menu">
                                            <li ng-repeat="subItem in item.subItems">
                                                <a href="#" ng-click="qe.showFilterItem(subItem)">
                                                    {{qe.filterItems[subItem].label | translate }}
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>


                        </div>


                        <div class="form-group col-md-2">
                            <div class="input-group">
                                <input type="text"
                                       ng-model="qe.currentQuery.name"
                                       class="form-control input-sm"
                                       uib-tooltip="{{'Give a name to this filter' | translate }}"
                                       placeholder="Name"/>

                                <span class="input-group-btn">
                                    <button class="btn btn-sm btn-primary"
                                            type="button"
                                            uib-tooltip="{{ 'Save'| translate }}"
                                            ng-click="qe.save()">
                                        <i class="fa fa-save"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ibox-content">
                    <!--
                    <query-editor></query-editor>
                    <div class="hr-line-dashed"></div>-->
                    <loading-info></loading-info>

                    <div ng-if="data" ui-grid="{data:data.documents, columnDefs:columnDefs}"
                         style="height: 500px;">

                    </div>
                </div>

                <div class="ibox-footer">
                    <div translate markdown>*Sort buttons on table sorts only loaded data.*
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
