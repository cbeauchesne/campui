<div class="{{c2c_item}}s-view">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h3>{{c2c_item + 's' | translate}}</h3>
                    <div ng-if="data" ibox-tools></div>
                </div>
                <div class="ibox-content query-editor">

                    <div class="row">

                        <filter-item ng-repeat="(itemId, itemValue) in qe.queryModel"
                                     query-editor="qe"
                                     item-id="itemId">
                        </filter-item>

                        <div class="form-group col-md-3">

                            <div class="dropdown" ng-if="qe.filterItemStorage.availables">
                                <button class="btn btn-sm badge-success dropdown-toggle"
                                        type="button"
                                        data-toggle="dropdown"
                                        uib-tooltip="{{ 'Add a item'| translate }}">
                                    <i class="fa fa-plus"></i>
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li ng-repeat="item in qe.filterItemStorage.availables">
                                        <a href="#" ng-click="qe.showFilterItem(item)">
                                            {{qe.filterItems[item].label | translate }}
                                        </a>
                                    </li>
                                </ul>
                            </div>

                            <div class="dropdown" ng-if="qe.filterItemStorage.storage">
                                <button class="btn btn-sm btn-rounded badge-success"
                                        type="button"
                                        data-toggle="modal"
                                        data-target="#filterChooser">

                                    <!--<span translate>Add a item</span>-->
                                    <i class="fa fa-plus"></i>
                                    <span translate>Add a filter item</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ibox-content">
                    <!--
                    <query-editor></query-editor>
                    <div class="hr-line-dashed"></div>-->
                    <loading-info></loading-info>

                    <div ng-if="data"
                         ui-grid="{data:data.documents, columnDefs:columnDefs, infiniteScrollDown: true, onRegisterApi:onRegisterApi,infiniteScrollRowsFromEnd:5}"
                         ui-grid-infinite-scroll
                         style="height: 500px;">

                    </div>

                    <div map-lazy-load="http://maps.google.com/maps/api/js?key=AIzaSyAYiZ3lDd0WNJIOEWLO_y2tJHTmWmZG6oY">
                        <button ng-click="xxx()">xxx</button>{{map.markers}}
                        <ng-map center="{{map.latitude}}, {{map.longitude}}" zoom="9" street-view-control="false" map-type-id="terrain">
                        </ng-map>
                    </div>
                </div>

                <div class="ibox-footer">
                    <div translate markdown>*Sort buttons on table sorts only loaded data.*
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="filterChooser" class="modal fade" role="dialog">
        <div class="modal-dialog" ng-class="{'modal-lg':qe.filterItemStorage.storage.length>3}">

            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">
                        <i class="fa fa-filter"></i>
                        <span translate>Select filters</span>
                    </h3>
                </div>
                <div class="modal-body">

                    <div class="row">
                        <div class="col-md-{{qe.filterItemStorage.bootstrapCol}}"
                             ng-repeat="folder in qe.filterItemStorage.storage">
                            <h4>{{folder.label | translate}}</h4>
                            <div ng-repeat="itemId in folder.subItems">
                                <button class="btn btn-default btn-rounded"
                                        type="button"
                                        uib-tooltip="{{itemId}}"
                                        ng-class="{'active':qe.filterItemIsSelected(itemId)}"
                                        ng-click="qe.toggleFilterItem(itemId)">
                                    <i class="fa fa-check"></i>
                                    &nbsp;&nbsp;
                                    <span>{{qe.filterItems[itemId].label | translate}}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
