<div>
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h3>{{getLabel()}}</h3>
                    <div ng-if="data" ibox-tools></div>
                </div>
                <div class="ibox-content query-editor">
                    <div class="row">
                        <div class="form-group col-md-2">
                            <input type="text"
                                   ng-model="qe.currentQuery.name"
                                   class="form-control input-sm"
                                   uib-tooltip="{{'Give a name to this filter' | translate }}"
                                   placeholder="Name"/>
                        </div>

                        <div class="form-group  col-md-3" uib-tooltip="{{ 'Activities'| translate }}">
                            <ui-select multiple
                                       theme="bootstrap"
                                       class="form-control"
                                       close-on-select="false"
                                       on-select="qe.apply()"
                                       on-remove="qe.apply()"
                                       ng-model="qe.queryModel.act">
                                <ui-select-match placeholder="{{'Activities...' | translate}}">
                                    <img ng-src="/static/img/{{$item}}-16x16.png">
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="act in qe.metadata.activities">
                                    <span value="act">{{act | translate}}</span>
                                </ui-select-choices>
                            </ui-select>
                        </div>

                        <div class="form-group  col-md-3" uib-tooltip="{{ 'Areas'| translate }}">
                            <ui-select multiple
                                       class="form-control"
                                       close-on-select="false"
                                       on-select="qe.apply()"
                                       on-remove="qe.apply()"
                                       ng-model="qe.queryModel.a">
                                <ui-select-match placeholder="{{'Select areas...' | translate}}">
                                    {{getLocale($item).title}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="area.document_id as  area in qe.metadata.areas | hasProp: 'visible'"
                                        refresh="qe.refreshAreas($select.search, qe.queryModel.a)"
                                        refresh-delay="300">
                                    {{getLocale(area).title}}
                                </ui-select-choices>
                            </ui-select>
                        </div>


                        <div class="form-group col-md-2" ng-if="qe.queryModel.w">
                            <input type="text"
                                   ng-model="qe.queryModel.w"
                                   class="form-control input-sm"
                                   uib-tooltip="{{'Waypoints' | translate }}"
                                   placeholder="Waypoints"/>
                        </div>

                        <div class="form-group col-md-2" ng-if="qe.queryModel.r">
                            <input type="text"
                                   ng-model="qe.queryModel.r"
                                   class="form-control input-sm"
                                   uib-tooltip="{{'Routes' | translate }}"
                                   placeholder="Routes"/>
                        </div>

                        <div class="form-group  col-md-2">
                            <button class="btn btn-sm btn-primary"
                                    uib-tooltip="{{ 'Save'| translate }}"
                                    ng-click="qe.save()">
                                <i class="fa fa-save"></i>
                            </button>
                            <button class="btn btn-sm btn-success"
                                    ng-if="qe.clonable"
                                    uib-tooltip="{{ 'Clone'| translate }}"
                                    ng-click="qe.clone()">
                                <i class="fa fa-copy"></i>
                            </button>
                            <button class="btn btn-sm btn-danger"
                                    ng-if="qe.deletable"
                                    uib-tooltip="{{ 'Delete'| translate }}"
                                    ng-click="qe.delete()">
                                <i class="fa fa-trash"></i>
                            </button>

                        </div>
                    </div>
                </div>

                <div class="ibox-content">
                    <!--
                    <query-editor></query-editor>
                    <div class="hr-line-dashed"></div>-->
                    <loading-info></loading-info>

                    <div ng-if="data" ui-grid="{data:data.documents, columnDefs:columnDefs}"
                         style="height: 500px;">

                    </div>
                </div>

                <div class="ibox-footer">
                    <div translate markdown>*Sort buttons on table sorts only loaded data.*
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
